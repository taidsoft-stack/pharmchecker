<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PharmChecker - ë°”ì½”ë“œ ê¸°ë°˜ ì•½í’ˆ ì¡°ì œ ì•ˆì „ ì§€ì› ì‹œìŠ¤í…œ</title>
  <link rel="icon" href="data:," />
  <script src="https://js.tosspayments.com/v2/standard"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.6;
      color: #191f28;
      background-color: #ffffff;
    }

    /* í—¤ë” ë„¤ë¹„ê²Œì´ì…˜ */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: white;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      z-index: 1000;
      padding: 12px 0;
    }

    .header .container {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-size: 24px;
      font-weight: 700;
      color: #191f28;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .nav-menu {
      display: flex;
      align-items: center;
      gap: 32px;
    }

    .nav-item {
      position: relative;
    }

    .nav-link {
      font-size: 15px;
      font-weight: 500;
      color: #191f28;
      text-decoration: none;
      padding: 8px 16px;
      border-radius: 6px;
      transition: background-color 0.2s;
      display: flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
    }

    .nav-link:hover {
      background-color: #f8f9fa;
    }

    .nav-dropdown-arrow {
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-top: 5px solid #6b7684;
      transition: transform 0.2s;
    }

    .nav-item.active .nav-dropdown-arrow {
      transform: rotate(180deg);
    }

    .nav-dropdown-menu {
      position: absolute;
      top: calc(100% + 8px);
      left: 0;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
      min-width: 220px;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s ease;
      z-index: 9999;
    }

    .nav-dropdown-menu.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .nav-dropdown-item {
      padding: 12px 20px;
      cursor: pointer;
      transition: background-color 0.2s;
      display: flex;
      align-items: center;
      gap: 10px;
      border-bottom: 1px solid #f0f0f0;
      text-decoration: none;
      color: #191f28;
    }

    .nav-dropdown-item:first-child {
      border-top-left-radius: 12px;
      border-top-right-radius: 12px;
    }

    .nav-dropdown-item:last-child {
      border-bottom-left-radius: 12px;
      border-bottom-right-radius: 12px;
      border-bottom: none;
    }

    .nav-dropdown-item:hover {
      background-color: #f8f9fa;
    }

    .nav-dropdown-item-icon {
      font-size: 16px;
    }

    .nav-dropdown-item-text {
      font-size: 14px;
      font-weight: 500;
    }

    .user-profile {
      position: relative;
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 8px 16px;
      border-radius: 24px;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .user-info:hover {
      background-color: #f8f9fa;
    }

    .user-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 600;
      font-size: 14px;
    }

    .user-avatar img {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
    }

    .user-name {
      font-size: 15px;
      font-weight: 500;
      color: #191f28;
    }

    .dropdown-arrow {
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-top: 5px solid #6b7684;
      transition: transform 0.2s;
    }

    .user-info.active .dropdown-arrow {
      transform: rotate(180deg);
    }

    .dropdown-menu {
      position: absolute;
      top: calc(100% + 8px);
      right: 0;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
      min-width: 200px;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s ease;
      z-index: 9999;
    }

    .dropdown-menu.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
      display: block;
    }

    .dropdown-item {
      padding: 14px 20px;
      cursor: pointer;
      transition: background-color 0.2s;
      display: flex;
      align-items: center;
      gap: 12px;
      border-bottom: 1px solid #f0f0f0;
    }

    .dropdown-item:first-child {
      border-top-left-radius: 12px;
      border-top-right-radius: 12px;
    }

    .dropdown-item:last-child {
      border-bottom-left-radius: 12px;
      border-bottom-right-radius: 12px;
      border-bottom: none;
    }

    .dropdown-item:hover {
      background-color: #f8f9fa;
    }

    .dropdown-item-icon {
      font-size: 18px;
    }

    .dropdown-item-text {
      font-size: 14px;
      color: #191f28;
      font-weight: 500;
    }

    .dropdown-item.logout {
      color: #e74c3c;
    }

    .dropdown-item.logout:hover {
      background-color: #fee;
    }

    .dropdown-item.logout .dropdown-item-text {
      color: #e74c3c;
    }

    body {
      padding-top: 60px; /* ê³ ì • í—¤ë” ë†’ì´ë§Œí¼ íŒ¨ë”© ì¶”ê°€ */
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 24px;
    }

    section {
      padding: 80px 0;
      border-bottom: 1px solid #e5e8eb;
    }

    h1 {
      font-size: 48px;
      font-weight: 600;
      line-height: 1.2;
      margin-bottom: 24px;
    }

    h2 {
      font-size: 32px;
      font-weight: 600;
      margin-bottom: 16px;
    }

    h3 {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 12px;
    }

    p {
      font-size: 18px;
      line-height: 1.8;
      color: #4e5968;
    }

    .hero {
      padding: 120px 0;
      text-align: center;
    }

    .hero h1 {
      font-size: 56px;
      margin-bottom: 32px;
    }

    .hero p {
      font-size: 20px;
      margin-bottom: 48px;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }

    .button-group {
      display: flex;
      gap: 16px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .button {
      display: inline-block;
      padding: 16px 32px;
      font-size: 16px;
      font-weight: 600;
      text-decoration: none;
      border-radius: 8px;
      transition: all 0.2s;
      cursor: pointer;
      border: none;
    }

    .button-primary {
      background-color: #191f28;
      color: #ffffff;
    }

    .button-primary:hover {
      background-color: #2c3440;
    }

    .button-secondary {
      background-color: #ffffff;
      color: #191f28;
      border: 2px solid #e5e8eb;
    }

    .button-secondary:hover {
      border-color: #191f28;
    }

    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
      margin-top: 40px;
    }

    .card {
      background-color: #f8f9fa;
      padding: 32px;
      border-radius: 12px;
      border: 1px solid #e5e8eb;
    }

    .card h3 {
      margin-bottom: 12px;
    }

    .card p {
      font-size: 16px;
    }

    .steps {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 24px;
      margin-top: 40px;
    }

    .step {
      background-color: #ffffff;
      padding: 32px;
      border-radius: 12px;
      border: 1px solid #e5e8eb;
    }

    .step-number {
      display: inline-block;
      background-color: #191f28;
      color: #ffffff;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      text-align: center;
      line-height: 32px;
      font-weight: 600;
      margin-bottom: 16px;
    }

    .solution-section {
      background-color: #f8f9fa;
    }

    .solution-content {
      max-width: 800px;
      margin: 0 auto;
    }

    .highlight {
      background-color: #fff5e1;
      padding: 24px;
      border-radius: 8px;
      border-left: 4px solid #ffa726;
      margin-top: 32px;
    }

    .highlight p {
      font-weight: 600;
      color: #191f28;
    }

    .philosophy-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
      margin-top: 40px;
    }

    .philosophy-item {
      text-align: center;
      padding: 32px;
      background-color: #ffffff;
      border-radius: 12px;
      border: 2px solid #e5e8eb;
    }

    .philosophy-item h3 {
      font-size: 18px;
      color: #191f28;
    }

    .cta-section {
      background-color: #191f28;
      color: #ffffff;
      text-align: center;
    }

    .cta-section h2 {
      color: #ffffff;
      margin-bottom: 32px;
    }

    footer {
      padding: 40px 0;
      text-align: center;
      background-color: #f8f9fa;
      border-top: 1px solid #e5e8eb;
    }

    footer p {
      font-size: 14px;
      color: #6b7684;
    }

    .badge {
      display: inline-block;
      background-color: #e5e8eb;
      color: #191f28;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 24px;
    }

    .pricing-section {
      background-color: #f8f9fa;
    }

    .pricing-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
      margin-top: 40px;
    }

    .pricing-card {
      background-color: #ffffff;
      padding: 40px 32px;
      border-radius: 12px;
      border: 3px solid #e5e8eb;
      text-align: center;
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }

    .pricing-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    }

    .pricing-card.light {
      border-color: #81c784;
    }

    .pricing-card.light:hover {
      border-color: #66bb6a;
      box-shadow: 0 8px 24px rgba(129, 199, 132, 0.3);
    }

    .pricing-card.basic {
      border-color: #64b5f6;
    }

    .pricing-card.basic:hover {
      border-color: #42a5f5;
      box-shadow: 0 8px 24px rgba(100, 181, 246, 0.3);
    }

    .pricing-card.super {
      border-color: #ba68c8;
    }

    .pricing-card.super:hover {
      border-color: #ab47bc;
      box-shadow: 0 8px 24px rgba(186, 104, 200, 0.3);
    }

    .pricing-card.premium {
      border-color: #ffa726;
    }

    .pricing-card.premium:hover {
      border-color: #fb8c00;
      box-shadow: 0 8px 24px rgba(255, 167, 38, 0.3);
    }

    .plan-badge {
      display: inline-block;
      padding: 6px 16px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 700;
      margin-bottom: 16px;
      color: white;
    }

    .plan-badge.light {
      background: linear-gradient(135deg, #81c784, #66bb6a);
    }

    .plan-badge.basic {
      background: linear-gradient(135deg, #64b5f6, #42a5f5);
    }

    .plan-badge.super {
      background: linear-gradient(135deg, #ba68c8, #ab47bc);
    }

    .plan-badge.premium {
      background: linear-gradient(135deg, #ffa726, #fb8c00);
    }

    .pricing-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 16px;
      color: #191f28;
    }

    .pricing-amount {
      font-size: 36px;
      font-weight: 700;
      color: #191f28;
      margin-bottom: 8px;
    }

    .pricing-period {
      font-size: 14px;
      color: #6b7684;
      margin-bottom: 24px;
    }

    .pricing-feature {
      background-color: #f8f9fa;
      padding: 12px 16px;
      border-radius: 8px;
      font-size: 14px;
      color: #4e5968;
      margin-bottom: 24px;
    }

    .pricing-button {
      width: 100%;
      padding: 16px;
      background-color: #191f28;
      color: #ffffff;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .pricing-button:hover {
      background-color: #2c3440;
    }

    @media (max-width: 768px) {
      h1 {
        font-size: 36px;
      }

      .hero h1 {
        font-size: 40px;
      }

      h2 {
        font-size: 28px;
      }

      section {
        padding: 60px 0;
      }

      .hero {
        padding: 80px 0;
      }

      .card-grid,
      .steps,
      .philosophy-grid,
      .pricing-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>

  <!-- í—¤ë” -->
  <header class="header">
    <div class="container">
      <a href="/pharmchecker" class="logo" style="text-decoration: none;">
        <span>TAID SOFT</span>
      </a>
      
      <div class="nav-menu">
        <!-- ê³ ê°ì„¼í„° ë©”ë‰´ -->
        <div class="nav-item" id="customerCenterNav">
          <div class="nav-link" onclick="toggleNavDropdown()">
            <span>ê³ ê°ì„¼í„°</span>
            <div class="nav-dropdown-arrow"></div>
          </div>
          <div class="nav-dropdown-menu" id="navDropdownMenu">
            <a href="/support/new" class="nav-dropdown-item">
              <span class="nav-dropdown-item-icon">âœï¸</span>
              <span class="nav-dropdown-item-text">ë¬¸ì˜í•˜ê¸°</span>
            </a>
            <a href="/support/faq" class="nav-dropdown-item">
              <span class="nav-dropdown-item-icon">â“</span>
              <span class="nav-dropdown-item-text">FAQ</span>
            </a>
          </div>
        </div>

        <!-- ì‚¬ìš©ì í”„ë¡œí•„ -->
        <div class="user-profile">
          <div class="user-info" onclick="toggleDropdown()">
            <div class="user-avatar" id="userAvatar">
              <span id="userInitial">U</span>
            </div>
            <span class="user-name" id="userName">ê²ŒìŠ¤íŠ¸</span>
            <div class="dropdown-arrow"></div>
          </div>
          <div class="dropdown-menu" id="dropdownMenu">
            <div class="dropdown-item" onclick="window.location.href='/my-subscription'">
              <span class="dropdown-item-icon">ğŸ“‹</span>
              <span class="dropdown-item-text">ë‚´ êµ¬ë… ì •ë³´</span>
            </div>
            <div class="dropdown-item" onclick="window.location.href='/payment-history'">
              <span class="dropdown-item-icon">ğŸ’³</span>
              <span class="dropdown-item-text">ê²°ì œ ë‚´ì—­</span>
            </div>
            <div class="dropdown-item" onclick="viewProfile()">
              <span class="dropdown-item-icon">ğŸ‘¤</span>
              <span class="dropdown-item-text">í”„ë¡œí•„ ë³´ê¸°</span>
            </div>
            <div class="dropdown-item logout" onclick="logout()">
              <span class="dropdown-item-icon">ğŸšª</span>
              <span class="dropdown-item-text">ë¡œê·¸ì•„ì›ƒ</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <section class="hero">
    <div class="container">
      <span class="badge">ì˜ë£Œ B2B ì†Œí”„íŠ¸ì›¨ì–´</span>
      <h1>PharmChecker<br>ë°”ì½”ë“œ ê¸°ë°˜ ì•½í’ˆ ì¡°ì œ ì•ˆì „ ì§€ì› ì‹œìŠ¤í…œ</h1>
      <p>ìœ ì‚¬í•œ ì•½í’ˆëª…, í˜¼ë™í•˜ê¸° ì‰¬ìš´ ìš©ëŸ‰ í‘œê¸°<br>ì‹¤ìˆ˜ê°€ ë°œìƒí•˜ê¸° ì‰¬ìš´ ì•½êµ­ ì¡°ì œ ì—…ë¬´ë¥¼ ìœ„í•œ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” í™•ì¸ ë„ìš°ë¯¸</p>
      <div class="button-group">
        <button class="button button-primary" id="subscribePlanBtn" onclick="goToSubscriptionPlans()" style="opacity: 0.5; cursor: wait;">ë¡œë”© ì¤‘...</button>
        <a href="#how-it-works" class="button button-secondary">ì‘ë™ ë°©ì‹</a>
      </div>
      <div class="button-group" id="downloadButtonGroup" style="display: none; margin-top: 1rem;">
        <button class="button button-primary" onclick="downloadProgram()">í”„ë¡œê·¸ë¨ ë‹¤ìš´ë¡œë“œ</button>
      </div>
      <p id="subscriptionStatus" style="margin-top: 1rem; font-size: 0.95rem; color: #48c78e; display: none;"></p>
    </div>
  </section>

  <!-- í”Œëœ ì„¹ì…˜ ì œê±°: ë³„ë„ í˜ì´ì§€ë¡œ ì´ë™ -->

  <section id="problem">
    <div class="container">
      <h2>ë¬¸ì œ</h2>
      <p>ì¡°ì œ ì—…ë¬´ëŠ” ë°˜ë³µì ì´ê³  ì‹œê°„ì— ë¯¼ê°í•©ë‹ˆë‹¤. ìˆ™ë ¨ëœ íŒ€ì—ì„œë„ ì¶©ë¶„íˆ ì˜ˆë°© ê°€ëŠ¥í•œ ì‹¤ìˆ˜ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
      <div class="card-grid">
        <div class="card">
          <h3>ìœ ì‚¬í•œ ì•½í’ˆëª…</h3>
        </div>
        <div class="card">
          <h3>ë™ì¼ ì„±ë¶„, ë‹¤ë¥¸ í•¨ëŸ‰</h3>
        </div>
        <div class="card">
          <h3>ì œì¡°ì‚¬ì— ë”°ë¥¸ í¬ì¥ ë³€ê²½</h3>
        </div>
        <div class="card">
          <h3>ë°˜ë³µ ì¡°ì œ ì—…ë¬´ì—ì„œì˜ ì¸ì  ì˜¤ë¥˜</h3>
        </div>
      </div>
    </div>
  </section>

  <section id="solution" class="solution-section">
    <div class="container">
      <div class="solution-content">
        <h2>í•´ê²°</h2>
        <p>PharmCheckerëŠ” ì•½í’ˆ í¬ì¥ì— ì¸ì‡„ëœ ì œí’ˆ ë°”ì½”ë“œë¥¼ ì‚¬ìš©í•´ ì‹¤ì œ ì¡°ì œí•˜ë ¤ëŠ” ì•½í’ˆì´ ì²˜ë°©ëœ ì•½í’ˆê³¼ ì¼ì¹˜í•˜ëŠ”ì§€ ê²€ì¦í•˜ëŠ” ì¡°ì œ ì§€ì› í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤.</p>
        <div class="highlight">
          <p>ì´ ì‹œìŠ¤í…œì€ ê²€ì¦í•©ë‹ˆë‹¤.<br>ì˜í•™ì  ê²°ì •ì„ ë‚´ë¦¬ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
        </div>
      </div>
    </div>
  </section>

  <section id="how-it-works">
    <div class="container">
      <h2>ì‘ë™ ë°©ì‹</h2>
      <div class="steps">
        <div class="step">
          <span class="step-number">1</span>
          <h3>ì²˜ë°© ì•½í’ˆ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°</h3>
        </div>
        <div class="step">
          <span class="step-number">2</span>
          <h3>ì œí’ˆ ë°”ì½”ë“œ ìŠ¤ìº”</h3>
        </div>
        <div class="step">
          <span class="step-number">3</span>
          <h3>ì‹œìŠ¤í…œ ìë™ ë¹„êµ</h3>
        </div>
        <div class="step">
          <span class="step-number">4</span>
          <h3>ì¼ì¹˜ / ë¶ˆì¼ì¹˜ ì¦‰ì‹œ ì•Œë¦¼</h3>
        </div>
      </div>
    </div>
  </section>

  <section id="features">
    <div class="container">
      <h2>í•µì‹¬ ê¸°ëŠ¥</h2>
      <div class="card-grid">
        <div class="card">
          <h3>ì œí’ˆ ë°”ì½”ë“œ ê¸°ë°˜ ê²€ì¦</h3>
          <p>ìŠ¤ìº”í•œ í¬ì¥ ë°”ì½”ë“œë¥¼ ì²˜ë°© í•­ëª©ê³¼ ë¹„êµí•´ í™•ì¸í•©ë‹ˆë‹¤.</p>
        </div>
        <div class="card">
          <h3>ì„±ë¶„ ë° í•¨ëŸ‰ ì¼ì¹˜ í™•ì¸</h3>
          <p>ìœ íš¨ì„±ë¶„ê³¼ í•¨ëŸ‰ê¹Œì§€ í•¨ê»˜ í™•ì¸í•´ í˜¼ë™ì„ ì¤„ì…ë‹ˆë‹¤.</p>
        </div>
        <div class="card">
          <h3>ì¦‰ê°ì ì¸ ì‹œê°Â·ìŒì„± ì•Œë¦¼</h3>
          <p>ì¦‰ì‹œ ì•Œë¦¼ìœ¼ë¡œ ë§ì„¤ì„ê³¼ ê²½ê³  ëˆ„ë½ì„ ì¤„ì…ë‹ˆë‹¤.</p>
        </div>
        <div class="card">
          <h3>ì¡°ì œ ì˜¤ë¥˜ ì˜ˆë°© ë¡œê·¸</h3>
          <p>ê²€ì¦ ê²°ê³¼ë¥¼ ê¸°ë¡í•´ ì‚¬í›„ í™•ì¸ê³¼ ê°œì„ ì— í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        </div>
      </div>
    </div>
  </section>

  <section id="philosophy" class="solution-section">
    <div class="container">
      <h2>ì² í•™ / ì‹ ë¢°</h2>
      <div class="philosophy-grid">
        <div class="philosophy-item">
          <h3>ì•½ì‚¬ë¥¼ ì˜ì‹¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤</h3>
        </div>
        <div class="philosophy-item">
          <h3>ì‚¬ëŒì€ ì‹¤ìˆ˜í•  ìˆ˜ ìˆë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤</h3>
        </div>
        <div class="philosophy-item">
          <h3>ê²€ì¦ì€ ë¹ ë¥´ê³  ë‹¨ìˆœí•´ì•¼ í•©ë‹ˆë‹¤</h3>
        </div>
        <div class="philosophy-item">
          <h3>í•œ ë²ˆì˜ ì•Œë¦¼ì´ í•œ ëª…ì˜ í™˜ìë¥¼ ë³´í˜¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</h3>
        </div>
      </div>
    </div>
  </section>

  <section id="contact" class="cta-section">
    <div class="container">
      <h2>ì•½êµ­ì—ì„œ PharmChecker ë„ì…ì„ ê³ ë ¤í•˜ê³  ê³„ì‹ ê°€ìš”?</h2>
      <a href="mailto:contact@pharmchecker.com" class="button button-primary">ë¬¸ì˜í•˜ê¸°</a>
    </div>
  </section>

  <footer>
    <div class="container">
      <p>PharmChecker Â©<br>ì•½í’ˆ ì¡°ì œ ì•ˆì „ ì§€ì› ì‹œìŠ¤í…œ</p>
      <p style="margin-top: 16px;">contact@pharmchecker.com</p>
    </div>
  </footer>

  <script>
    // Supabase í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
    const supabaseClient = window.supabase.createClient(
      'https://gitbtujexmsjfixgeoha.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpdGJ0dWpleG1zamZpeGdlb2hhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY0NzA5MDIsImV4cCI6MjA4MjA0NjkwMn0.BNN8hauH8NdHZ4vopW_CQ_iK9CR55nfp3JQwuTjrG48'
    );

    let currentUser = null;
    let accessToken = null;

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‚¬ìš©ì ì •ë³´ í‘œì‹œ
    window.addEventListener('DOMContentLoaded', async function() {
      const { data: { session } } = await supabaseClient.auth.getSession();
      
      if (!session) {
        // ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ê²½ìš° ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
        window.location.href = '/login';
        return;
      }
      
      currentUser = session.user;
      accessToken = session.access_token;
      
      // ì‚¬ìš©ì ì´ë¦„ ë° ì •ë³´ í‘œì‹œ
      const userName = currentUser.user_metadata.full_name || currentUser.email.split('@')[0];
      const userPicture = currentUser.user_metadata.avatar_url;
      
      document.getElementById('userName').textContent = userName + 'ë‹˜';
      
      // í”„ë¡œí•„ ì‚¬ì§„ì´ ìˆìœ¼ë©´ í‘œì‹œ, ì—†ìœ¼ë©´ ì´ë‹ˆì…œ í‘œì‹œ
      if (userPicture) {
        document.getElementById('userAvatar').innerHTML = `<img src="${userPicture}" alt="í”„ë¡œí•„">`;
      } else {
        // ì´ë¦„ì˜ ì²« ê¸€ìë¥¼ ì´ë‹ˆì…œë¡œ ì‚¬ìš©
        const initial = userName.charAt(0).toUpperCase();
        document.getElementById('userInitial').textContent = initial;
      }
      
      // êµ¬ë… ìƒíƒœ í™•ì¸
      await checkSubscriptionStatus();
    });
    
    // ë“œë¡­ë‹¤ìš´ í† ê¸€
    function toggleDropdown() {
      const dropdown = document.getElementById('dropdownMenu');
      const userInfo = document.querySelector('.user-info');
      
      dropdown.classList.toggle('active');
      userInfo.classList.toggle('active');
      
      // ê³ ê°ì„¼í„° ë“œë¡­ë‹¤ìš´ ë‹«ê¸°
      const navDropdown = document.getElementById('navDropdownMenu');
      const navItem = document.getElementById('customerCenterNav');
      if (navDropdown && navItem) {
        navDropdown.classList.remove('active');
        navItem.classList.remove('active');
      }
    }
    
    // ê³ ê°ì„¼í„° ë“œë¡­ë‹¤ìš´ í† ê¸€
    function toggleNavDropdown() {
      const navDropdown = document.getElementById('navDropdownMenu');
      const navItem = document.getElementById('customerCenterNav');
      
      navDropdown.classList.toggle('active');
      navItem.classList.toggle('active');
      
      // ì‚¬ìš©ì í”„ë¡œí•„ ë“œë¡­ë‹¤ìš´ ë‹«ê¸°
      const dropdown = document.getElementById('dropdownMenu');
      const userInfo = document.querySelector('.user-info');
      if (dropdown && userInfo) {
        dropdown.classList.remove('active');
        userInfo.classList.remove('active');
      }
    }
    
    // ì™¸ë¶€ í´ë¦­ ì‹œ ë“œë¡­ë‹¤ìš´ ë‹«ê¸°
    document.addEventListener('click', function(event) {
      const userProfile = document.querySelector('.user-profile');
      const dropdown = document.getElementById('dropdownMenu');
      const userInfo = document.querySelector('.user-info');
      
      const customerCenterNav = document.getElementById('customerCenterNav');
      const navDropdown = document.getElementById('navDropdownMenu');
      
      // ì‚¬ìš©ì í”„ë¡œí•„ ë“œë¡­ë‹¤ìš´ ë‹«ê¸°
      if (userProfile && !userProfile.contains(event.target)) {
        dropdown.classList.remove('active');
        userInfo.classList.remove('active');
      }
      
      // ê³ ê°ì„¼í„° ë“œë¡­ë‹¤ìš´ ë‹«ê¸°
      if (customerCenterNav && !customerCenterNav.contains(event.target)) {
        navDropdown.classList.remove('active');
        customerCenterNav.classList.remove('active');
      }
    });
    
    // í”„ë¡œí•„ ë³´ê¸°
    function viewProfile() {
      if (currentUser) {
        const userName = currentUser.user_metadata.full_name || currentUser.email.split('@')[0];
        const userEmail = currentUser.email;
        
        let profileInfo = `í”„ë¡œí•„ ì •ë³´\n\nì´ë¦„: ${userName}\nì´ë©”ì¼: ${userEmail}`;
        alert(profileInfo);
      }
    }
    
    // ë¡œê·¸ì•„ì›ƒ
    async function logout() {
      if (confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        await supabaseClient.auth.signOut();
        window.location.href = '/login';
      }
    }
    
    // êµ¬ë… ìƒíƒœ í™•ì¸ ë° ë²„íŠ¼ ë¹„í™œì„±í™”
    async function checkSubscriptionStatus() {
      if (!currentUser) return;
      
      const btn = document.getElementById('subscribePlanBtn');
      const statusText = document.getElementById('subscriptionStatus');
      const downloadBtnGroup = document.getElementById('downloadButtonGroup');
      
      try {
        const response = await fetch(`/api/subscription/my`, {
          headers: {
            'Authorization': `Bearer ${accessToken}`
          }
        });
        const data = await response.json();
        
        if (data.success) {
          // ì´ë¯¸ êµ¬ë… ì¤‘ì¸ ê²½ìš° ë²„íŠ¼ ë¹„í™œì„±í™” ë° ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ í‘œì‹œ
          btn.style.opacity = '0.5';
          btn.style.cursor = 'not-allowed';
          btn.style.pointerEvents = 'none';
          btn.textContent = 'êµ¬ë… ì¤‘';
          
          statusText.textContent = `âœ“ ${data.subscription.planName} í”Œëœì„ ì‚¬ìš© ì¤‘ì…ë‹ˆë‹¤`;
          statusText.style.display = 'block';
          
          // ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ í‘œì‹œ
          downloadBtnGroup.style.display = 'flex';
        } else {
          // êµ¬ë… ì—†ëŠ” ê²½ìš°
          btn.style.opacity = '1';
          btn.style.cursor = 'pointer';
          btn.style.pointerEvents = 'auto';
          btn.textContent = 'êµ¬ë… í”Œëœ ì„ íƒí•˜ê¸°';
          
          // ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ ìˆ¨ê¹€
          downloadBtnGroup.style.display = 'none';
        }
      } catch (error) {
        console.log('êµ¬ë… ìƒíƒœ í™•ì¸ ì¤‘ ì˜¤ë¥˜ (êµ¬ë… ì—†ìŒ):', error);
        // ì˜¤ë¥˜ ì‹œì—ë„ ë²„íŠ¼ í™œì„±í™” ë° ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ ìˆ¨ê¹€
        btn.style.opacity = '1';
        btn.style.cursor = 'pointer';
        btn.style.pointerEvents = 'auto';
        btn.textContent = 'êµ¬ë… í”Œëœ ì„ íƒí•˜ê¸°';
        downloadBtnGroup.style.display = 'none';
      }
    }
    
    // êµ¬ë… í”Œëœ ì„ íƒ í˜ì´ì§€ë¡œ ì´ë™ (êµ¬ë… ì¤‘ì´ë©´ ë‚´ êµ¬ë… ì •ë³´ë¡œ ì´ë™)
    async function goToSubscriptionPlans() {
      if (!currentUser) {
        alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
        window.location.href = '/login';
        return;
      }
      
      try {
        const response = await fetch(`/api/subscription/my`, {
          headers: {
            'Authorization': `Bearer ${accessToken}`
          }
        });
        const data = await response.json();
        
        if (data.success) {
          // ì´ë¯¸ êµ¬ë… ì¤‘
          alert('ì´ë¯¸ êµ¬ë… ì¤‘ì…ë‹ˆë‹¤. ë‚´ êµ¬ë… ì •ë³´ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.');
          window.location.href = '/my-subscription';
        } else {
          // êµ¬ë… ì—†ìŒ - í”Œëœ ì„ íƒ í˜ì´ì§€ë¡œ
          window.location.href = '/subscription/plans';
        }
      } catch (error) {
        // êµ¬ë… ì—†ìŒ (404 ë“±)
        window.location.href = '/subscription/plans';
      }
    }
    
    // í”„ë¡œê·¸ë¨ ë‹¤ìš´ë¡œë“œ
    async function downloadProgram() {
      try {
        const response = await fetch('/api/download/latest', {
          headers: {
            'Authorization': `Bearer ${accessToken}`
          }
        });
        
        const data = await response.json();
        
        if (data.success) {
          // ëª¨ë“  íŒŒì¼ ë‹¤ìš´ë¡œë“œ
          for (const file of data.files) {
            const link = document.createElement('a');
            link.href = file.downloadUrl;
            link.download = file.filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // íŒŒì¼ ê°„ ë‹¤ìš´ë¡œë“œ ê°„ê²© (ë¸Œë¼ìš°ì € ì°¨ë‹¨ ë°©ì§€)
            await new Promise(resolve => setTimeout(resolve, 500));
          }
          
          alert(`${data.files.length}ê°œ íŒŒì¼ ë‹¤ìš´ë¡œë“œë¥¼ ì‹œì‘í–ˆìŠµë‹ˆë‹¤.`);
        } else {
          alert(data.message || 'ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
      } catch (error) {
        console.error('ë‹¤ìš´ë¡œë“œ ì˜¤ë¥˜:', error);
        alert('ë‹¤ìš´ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
      }
    }
    
    function subscribePlan(planName, amount) {
      // ê²°ì œ í˜ì´ì§€ë¥¼ ìƒˆ ì°½ìœ¼ë¡œ ì—´ê¸°
      const url = `/payment?plan=${encodeURIComponent(planName)}&amount=${amount}`;
      const popupWidth = 600;
      const popupHeight = 800;
      const left = (window.screen.width - popupWidth) / 2;
      const top = (window.screen.height - popupHeight) / 2;
      
      window.open(
        url, 
        'payment', 
        `width=${popupWidth},height=${popupHeight},left=${left},top=${top},resizable=yes,scrollbars=yes`
      );
    }
  </script>

</body>
</html>
